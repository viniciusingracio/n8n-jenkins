- hosts: with-certbot
  roles:
  - certbot

# Recording workers
- hosts: rec-worker
  roles:
  - rec-worker

# Recording proxies
- hosts: rec-proxy
  roles:
  - { role: certbot, when: certbot_enabled }
  - { role: dj-wasabi.zabbix-agent, when: zabbix_agent_enabled }
  - rec-proxy
- hosts: rec-proxy-self-signed
  roles:
  # - self-signed-cert
  - rec-proxy

# WordPress sites
- hosts: wp
  roles:
  - wp

# Mconf-DB
- hosts: mconf-db
  roles:
  - mconf-db

# Mconf-Web
- hosts: mconf-web
  roles:
  - mconf-web
# Mconf-Web-Reports
- hosts: mconf-web-reports
  roles:
  - mconf-web-reports

# Mconf-LB
- hosts: mconf-lb
  roles:
  - mconf-lb

# Mconf-Console
- hosts: mconf-console
  roles:
  - mconf-console

# Nagios
- hosts: nagios
  roles:
  - nagios

# Zabbix
- hosts: zabbix
  roles:
  - zabbix

# BigBlueButton
- hosts: bigbluebutton
  roles:
  - { role: certbot, when: certbot_enabled }
  - bigbluebutton

- hosts: bigbluebutton-dev
  roles:
  - bigbluebutton-dev

# Mconf-Live
- hosts:
  - mconf-live110
  roles:
  - { role: certbot, when: certbot_enabled }
  - { role: dj-wasabi.zabbix-agent, when: zabbix_agent_enabled }
  - { role: GTI.basic.security, when: inventory_hostname is search(".*\.rnp\.br"), become: yes }
  - mconf-live

# Mconf-Live
- hosts:
  - mconf-live200
  roles:
  - { role: certbot, when: certbot_enabled }
  - { role: dj-wasabi.zabbix-agent, when: zabbix_agent_enabled }
  - { role: GTI.basic.security, when: inventory_hostname is search(".*\.rnp\.br"), become: yes }
  - mconf-live

- hosts:
  - monitored-by-nagios
  roles:
  - performance-report
  - nsca
  
# Kurento
- hosts: kurento
  roles:
  - kurento

# Docker registry
- hosts: docker-registry
  roles:
  - docker-registry

# VTraining
- hosts: vtraining
  roles:
  - vtraining-portal
  - vtraining-mosaico
  - vtraining-debriefing

- hosts: vtraining-portal
  roles:
  - node
  - ruby
  - vtraining-portal

- hosts: vtraining-mosaico
  roles:
  - vtraining-mosaico

- hosts: vtraining-debriefing
  roles:
  - vtraining-debriefing

- hosts: jenkins
  roles:
  - jenkins

- hosts: mconf-aggr-zabbix
  roles:
  - mconf-aggr
  vars:
  - mconf_aggr_type: 'zabbix'

- hosts: mconf-aggr-conf
  roles:
  - mconf-aggr
  vars:
  - mconf_aggr_type: 'conf'

- hosts: mconf-lti
  roles:
  - { role: certbot, when: certbot_enabled }
  - { role: dj-wasabi.zabbix-agent, when: zabbix_agent_enabled }
  - mconf-lti

- hosts: docker-host
  roles:
  - docker-host

- hosts: mconf-rec
  roles:
  - { role: certbot, when: certbot_enabled }
  - { role: dj-wasabi.zabbix-agent, when: zabbix_agent_enabled }
  - { role: GTI.basic.security, when: inventory_hostname is search(".*\.rnp\.br"), become: yes }
  - mconf-rec

- hosts: aws-publisher
  roles:
  - aws-publisher
